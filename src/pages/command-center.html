<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <link rel="icon" type="image/png" href="/rogue-origin-apps/favicon.png">
  <link rel="manifest" href="/rogue-origin-apps/manifest.json">
  <meta name="theme-color" content="#0a0f0a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Command Center">
  <link rel="apple-touch-icon" href="/rogue-origin-apps/assets/icon-apple-touch.png">
  <title>Command Center | Rogue Origin</title>

  <!-- Performance: Resource Hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=JetBrains+Mono:wght@400;500;600;700&family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Phosphor Icons -->
  <link rel="stylesheet" href="https://unpkg.com/@phosphor-icons/web@2.0.3/src/duotone/style.css">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="../css/shared-base.css">
  <link rel="stylesheet" href="../css/command-center.css">
</head>
<body class="dark-mode">
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- ============================================
       HEADER BAR
       ============================================ -->
  <header class="cc-header" role="banner">
    <div class="cc-header-left">
      <div class="cc-strain-badge">
        <i class="ph-duotone ph-plant"></i>
        <span id="strainName" class="cc-strain-name">Loading...</span>
      </div>
      <div class="cc-line-indicator">
        <span class="cc-line-label">Line 1</span>
      </div>
    </div>

    <div class="cc-header-center">
      <time class="cc-clock" id="clock" datetime="">--:--:--</time>
      <div class="cc-date" id="date">Loading...</div>
    </div>

    <div class="cc-header-right">
      <div class="cc-connection-status" id="connectionStatus" data-status="connecting">
        <span class="cc-status-dot"></span>
        <span class="cc-status-text">CONNECTING</span>
      </div>
      <button class="cc-refresh-btn" id="refreshBtn" title="Refresh data" aria-label="Refresh data">
        <i class="ph-duotone ph-arrows-clockwise"></i>
      </button>
      <a href="index.html" class="cc-nav-btn" title="Back to Dashboard" aria-label="Back to Dashboard">
        <i class="ph-duotone ph-house"></i>
      </a>
    </div>
  </header>

  <!-- ============================================
       MAIN CONTENT
       ============================================ -->
  <main id="main-content" class="cc-main">

    <!-- PRIMARY METRICS ROW -->
    <section class="cc-primary-row" aria-label="Primary metrics">

      <!-- DAILY GOAL PANEL -->
      <article class="cc-panel cc-panel-daily" aria-labelledby="dailyGoalLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-target"></i>
          <h2 id="dailyGoalLabel">Daily Goal</h2>
        </header>
        <div class="cc-panel-body">
          <div class="cc-metric-large">
            <span class="cc-metric-actual" id="dailyActual">--</span>
            <span class="cc-metric-separator">/</span>
            <span class="cc-metric-target" id="dailyTarget">--</span>
            <span class="cc-metric-unit">lbs</span>
          </div>
          <div class="cc-progress-container">
            <div class="cc-progress-bar">
              <div class="cc-progress-fill" id="dailyProgressFill" style="--progress: 0%"></div>
              <div class="cc-progress-marker" id="timeMarker" style="--position: 0%" title="Expected progress"></div>
            </div>
            <div class="cc-progress-labels">
              <span class="cc-progress-pct" id="dailyPct">0%</span>
              <span class="cc-progress-hours" id="hoursLogged">0 hrs logged</span>
            </div>
          </div>
          <div class="cc-delta-badge" id="dailyDelta" data-trend="neutral">
            <i class="ph-duotone ph-minus"></i>
            <span>On Track</span>
          </div>
        </div>
      </article>

      <!-- CURRENT PACE PANEL -->
      <article class="cc-panel cc-panel-pace" aria-labelledby="paceLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-gauge"></i>
          <h2 id="paceLabel">Current Pace</h2>
        </header>
        <div class="cc-panel-body">
          <div class="cc-metric-hero">
            <span class="cc-metric-value" id="currentPace">--</span>
            <span class="cc-metric-unit">lbs/hr</span>
          </div>
          <div class="cc-pace-comparison" id="paceComparison">
            <div class="cc-comparison-item">
              <span class="cc-comparison-label">vs Target</span>
              <span class="cc-comparison-value" id="vsTargetPct" data-trend="neutral">--</span>
            </div>
            <div class="cc-comparison-item">
              <span class="cc-comparison-label">Avg Today</span>
              <span class="cc-comparison-value" id="avgPace">--</span>
            </div>
          </div>
        </div>
        <div class="cc-panel-glow"></div>
      </article>

      <!-- FINISH TIME PANEL -->
      <article class="cc-panel cc-panel-finish" aria-labelledby="finishLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-flag-checkered"></i>
          <h2 id="finishLabel">Projected Finish</h2>
        </header>
        <div class="cc-panel-body">
          <div class="cc-metric-hero">
            <span class="cc-metric-value cc-finish-time" id="finishTime">--:--</span>
            <span class="cc-metric-suffix" id="finishPeriod">PM</span>
          </div>
          <div class="cc-finish-delta" id="finishDelta" data-trend="neutral">
            <i class="ph-duotone ph-clock"></i>
            <span id="finishDeltaText">Calculating...</span>
          </div>
          <div class="cc-finish-projection">
            <span class="cc-projection-label">End of day:</span>
            <span class="cc-projection-value" id="projectedTotal">-- lbs</span>
          </div>
        </div>
      </article>
    </section>

    <!-- SECONDARY METRICS ROW -->
    <section class="cc-secondary-row" aria-label="Secondary metrics">

      <!-- LAST HOUR PANEL -->
      <article class="cc-panel cc-panel-last-hour" aria-labelledby="lastHourLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-clock-countdown"></i>
          <h2 id="lastHourLabel">Last Hour</h2>
          <span class="cc-hour-slot" id="lastHourSlot">--:-- - --:--</span>
        </header>
        <div class="cc-panel-body cc-last-hour-body">
          <div class="cc-last-hour-metrics">
            <div class="cc-metric-stack">
              <span class="cc-metric-value-lg" id="lastHourLbs">--</span>
              <span class="cc-metric-target-sm">/ <span id="lastHourTarget">--</span> lbs</span>
            </div>
            <div class="cc-pct-ring" id="lastHourRing">
              <svg viewBox="0 0 100 100" aria-hidden="true">
                <circle class="cc-ring-bg" cx="50" cy="50" r="42" />
                <circle class="cc-ring-progress" id="lastHourRingProgress" cx="50" cy="50" r="42"
                        stroke-dasharray="264" stroke-dashoffset="264" />
              </svg>
              <span class="cc-ring-value" id="lastHourPct">--%</span>
            </div>
          </div>
          <div class="cc-crew-badge" id="lastHourCrew">
            <i class="ph-duotone ph-users-three"></i>
            <span><span id="lastHourTrimmers">-</span>T</span>
            <span class="cc-crew-separator"></span>
            <span><span id="lastHourBuckers">-</span>B</span>
          </div>
        </div>
      </article>

      <!-- BAG TIMER PANEL -->
      <article class="cc-panel cc-panel-timer" aria-labelledby="timerLabel" data-status="neutral">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-timer"></i>
          <h2 id="timerLabel">5KG Bag Timer</h2>
          <span class="cc-live-indicator" id="timerLive">
            <span class="cc-live-dot"></span>
            LIVE
          </span>
        </header>
        <div class="cc-panel-body cc-timer-body">
          <div class="cc-timer-ring-container">
            <svg class="cc-timer-ring" viewBox="0 0 200 200" aria-hidden="true">
              <defs>
                <linearGradient id="timerGradientGreen" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#4ade80" />
                  <stop offset="100%" style="stop-color:#22c55e" />
                </linearGradient>
                <linearGradient id="timerGradientYellow" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#fde047" />
                  <stop offset="100%" style="stop-color:#eab308" />
                </linearGradient>
                <linearGradient id="timerGradientRed" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#f87171" />
                  <stop offset="100%" style="stop-color:#dc2626" />
                </linearGradient>
              </defs>
              <circle class="cc-timer-ring-bg" cx="100" cy="100" r="85" />
              <circle class="cc-timer-ring-progress" id="timerRingProgress" cx="100" cy="100" r="85"
                      stroke-dasharray="534" stroke-dashoffset="0" data-status="green" />
            </svg>
            <div class="cc-timer-center">
              <span class="cc-timer-value" id="timerValue" data-status="green">--:--</span>
              <span class="cc-timer-label" id="timerStatusLabel">remaining</span>
            </div>
          </div>
          <div class="cc-timer-stats">
            <div class="cc-timer-stat">
              <span class="cc-stat-value" id="bagsToday">--</span>
              <span class="cc-stat-label">Bags Today</span>
            </div>
            <div class="cc-timer-stat">
              <span class="cc-stat-value" id="avgCycleTime">--:--</span>
              <span class="cc-stat-label">Avg Cycle</span>
            </div>
            <div class="cc-timer-stat">
              <span class="cc-stat-value" id="timerTrimmers">--</span>
              <span class="cc-stat-label">Trimmers</span>
            </div>
          </div>
        </div>
        <div class="cc-timer-status-glow" id="timerGlow" data-status="neutral"></div>
      </article>
    </section>

    <!-- TERTIARY ROW -->
    <section class="cc-tertiary-row" aria-label="Crew and hourly breakdown">

      <!-- CREW BREAKDOWN -->
      <article class="cc-panel cc-panel-crew" aria-labelledby="crewLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-users-four"></i>
          <h2 id="crewLabel">Current Crew</h2>
        </header>
        <div class="cc-panel-body cc-crew-body">
          <div class="cc-crew-total">
            <span class="cc-crew-count" id="totalCrew">--</span>
            <span class="cc-crew-label">Total</span>
          </div>
          <div class="cc-crew-breakdown">
            <div class="cc-crew-line" id="line1Crew">
              <span class="cc-line-name">Line 1</span>
              <div class="cc-line-counts">
                <span class="cc-trimmer-count"><span id="line1Trimmers">-</span>T</span>
                <span class="cc-bucker-count"><span id="line1Buckers">-</span>B</span>
              </div>
            </div>
            <div class="cc-crew-line" id="line2Crew">
              <span class="cc-line-name">Line 2</span>
              <div class="cc-line-counts">
                <span class="cc-trimmer-count"><span id="line2Trimmers">-</span>T</span>
                <span class="cc-bucker-count"><span id="line2Buckers">-</span>B</span>
              </div>
            </div>
          </div>
          <div class="cc-target-rate">
            <i class="ph-duotone ph-crosshair"></i>
            <span>Target: <span id="targetRate">--</span> lbs/hr/trimmer</span>
          </div>
        </div>
      </article>

      <!-- HOURLY CHART -->
      <article class="cc-panel cc-panel-chart" aria-labelledby="chartLabel">
        <header class="cc-panel-header">
          <i class="ph-duotone ph-chart-bar"></i>
          <h2 id="chartLabel">Hourly Performance</h2>
          <div class="cc-chart-legend" aria-hidden="true">
            <span class="cc-legend-item cc-legend-actual">
              <span class="cc-legend-dot"></span>
              Actual
            </span>
            <span class="cc-legend-item cc-legend-target">
              <span class="cc-legend-dot"></span>
              Target
            </span>
          </div>
        </header>
        <div class="cc-panel-body cc-chart-body">
          <div class="cc-chart-container" id="hourlyChart" role="img" aria-label="Hourly performance chart">
            <!-- Chart bars will be injected by JavaScript -->
            <div class="cc-chart-placeholder">
              <i class="ph-duotone ph-chart-bar"></i>
              <span>Loading hourly data...</span>
            </div>
          </div>
        </div>
      </article>
    </section>

    <!-- ALERTS BAR -->
    <aside class="cc-alerts-bar" id="alertsBar" role="alert" aria-live="polite">
      <div class="cc-alerts-icon">
        <i class="ph-duotone ph-lightning"></i>
      </div>
      <div class="cc-alerts-content" id="alertsContent">
        <div class="cc-alert cc-alert-info">
          <span>Command Center initializing...</span>
        </div>
      </div>
    </aside>

  </main>

  <!-- Performance Stats Overlay (hidden by default, toggle with keyboard) -->
  <div class="cc-perf-overlay" id="perfOverlay" hidden aria-hidden="true">
    <div class="cc-perf-stat">
      <span class="cc-perf-label">Last Update</span>
      <span class="cc-perf-value" id="lastUpdateTime">--</span>
    </div>
    <div class="cc-perf-stat">
      <span class="cc-perf-label">Latency</span>
      <span class="cc-perf-value" id="latency">--ms</span>
    </div>
  </div>

  <!-- JavaScript Module -->
  <script type="module" src="../js/command-center/main.js"></script>
</body>
</html>
