!DOCTYPE html
html
head
  
  meta charset=UTF-8
  meta name=viewport content=width=device-width, initial-scale=1.0
  titleProduction Scoreboardtitle
  script src=httpscdn.jsdelivr.netnpmchart.jsscript
  script src=httpsunpkg.com@phosphor-iconswebscript
  style
    @import url('httpsfonts.googleapis.comcss2family=Interwght@400;600;700;900&display=swap');
    
    root {
       Rogue Origin Brand Colors 
      --gold #e4aa4f;
      --gold-light #f0cb60;
      --green #668971;
      --green-bright #7a9d87;
      --sungrown #bf8e4e;
      --greenhouse #8f9263;
      --indoor #62758d;
      
       Status Colors 
      --status-green #4ade80;
      --status-yellow #fde047;
      --status-red #f87171;
      --status-gray #94a3b8;
    }
    
     { box-sizing border-box; margin 0; padding 0; }
    html, body { height 100%; font-family 'Inter', system-ui, sans-serif; overflow hidden; }
    body { display flex; transition background 0.5s ease; }
    
     Dynamic Status Backgrounds - kept but refined 
    body.ahead { background linear-gradient(145deg, #0d2818 0%, #1a4d2e 50%, #0d2818 100%); }
    body.on-target { background linear-gradient(145deg, #2d2a0d 0%, #4d4a1a 50%, #2d2a0d 100%); }
    body.behind { background linear-gradient(145deg, #2d0d0d 0%, #4d1a1a 50%, #2d0d0d 100%); }
    body.idle { background linear-gradient(145deg, #1a1f16 0%, #2d3a2e 50%, #1a1f16 100%); }
    
    .main-panel { flex 1; display flex; flex-direction column; align-items center; justify-content center; padding 20px 30px; height 100vh; overflow hidden; }
    
    .timer-panel { width 380px; min-width 380px; display flex; flex-direction column; align-items center; justify-content center; padding 30px; border-left 2px solid rgba(228,170,79,0.2); height 100vh; transition background 0.5s ease; }
    .timer-panel.green { background linear-gradient(180deg, rgba(102, 137, 113, 0.4) 0%, rgba(102, 137, 113, 0.2) 100%); }
    .timer-panel.yellow { background linear-gradient(180deg, rgba(228, 170, 79, 0.4) 0%, rgba(228, 170, 79, 0.2) 100%); }
    .timer-panel.red { background linear-gradient(180deg, rgba(239, 68, 68, 0.3) 0%, rgba(185, 28, 28, 0.2) 100%); }
    .timer-panel.neutral { background rgba(0,0,0,0.4); }
    
    .scoreboard { text-align center; width 100%; max-width 1400px; display flex; flex-direction column; align-items center; justify-content center; gap 12px; }
    
     Status Badge - uses brand gold border 
    .status-badge { display inline-flex; align-items center; gap 16px; padding 12px 36px; border-radius 60px; font-size 28px; font-weight 700; text-transform uppercase; letter-spacing 3px; }
    body.ahead .status-badge { background rgba(102, 137, 113, 0.3); color var(--status-green); border 3px solid var(--status-green); }
    body.on-target .status-badge { background rgba(228, 170, 79, 0.3); color var(--gold-light); border 3px solid var(--gold); }
    body.behind .status-badge { background rgba(239, 68, 68, 0.2); color var(--status-red); border 3px solid var(--status-red); }
    body.idle .status-badge { background rgba(148, 163, 184, 0.2); color var(--status-gray); border 3px solid var(--status-gray); }
    .status-icon { font-size 32px; display flex; align-items center; justify-content center; }
    
     Hour Cards - refined with brand accents 
    .hour-cards { display flex; justify-content center; gap 25px; flex-wrap wrap; }
    .hour-card { background rgba(0,0,0,0.4); border-radius 20px; padding 16px 40px; min-width 320px; border 2px solid rgba(228,170,79,0.15); }
    .hour-card.last-hour { border 3px solid rgba(228,170,79,0.3); }
    .hour-card.current-hour { border 3px solid rgba(102, 137, 113, 0.6); background rgba(102, 137, 113, 0.15); animation currentHourPulse 2s ease-in-out infinite; }
    .hour-card-header { font-size 14px; color var(--gold); text-transform uppercase; letter-spacing 2px; margin-bottom 6px; }
    .hour-card.current-hour .hour-card-header { color var(--green-bright); }
    .hour-card-timeslot { font-size 16px; color rgba(255,255,255,0.4); margin-bottom 8px; }
    .lbs-row { display flex; align-items baseline; justify-content center; gap 10px; margin-bottom 4px; }
    .actual-lbs { font-size 72px; font-weight 900; line-height 1; color #ffffff; text-shadow 0 4px 20px rgba(0,0,0,0.3); }
    .hour-card.current-hour .actual-lbs { color var(--green-bright); font-size 60px; }
    .separator { font-size 42px; font-weight 300; color rgba(255,255,255,0.4); }
    .target-lbs { font-size 42px; font-weight 700; color rgba(255,255,255,0.5); }
    .lbs-unit { font-size 16px; font-weight 600; color rgba(255,255,255,0.5); text-transform uppercase; letter-spacing 2px; }
    .percentage-display { margin 4px 0; }
    .percentage-value { font-size 36px; font-weight 900; }
    .hour-card.current-hour .percentage-value { color var(--green-bright); }
    .percentage-label { font-size 13px; color rgba(255,255,255,0.5); text-transform uppercase; letter-spacing 1px; }
    
     Chart Container - brand styling 
    .chart-container {
      background rgba(0,0,0,0.4);
      border-radius 16px;
      padding 14px 20px;
      margin 0 auto;
      width 100%;
      max-width 850px;
      display block;
      border 1px solid rgba(228,170,79,0.15);
    }
    .chart-header {
      font-size 12px;
      color var(--gold);
      text-transform uppercase;
      letter-spacing 2px;
      margin-bottom 8px;
      text-align left;
    }
    .chart-wrapper {
      height 120px;
      position relative;
    }
    
     Daily Progress - brand accent 
    .daily-progress { background rgba(0,0,0,0.4); border-radius 20px; padding 16px 40px; display inline-block; min-width 520px; border 2px solid rgba(228,170,79,0.2); }
    .daily-header { font-size 13px; color var(--gold); text-transform uppercase; letter-spacing 2px; margin-bottom 8px; }
    .daily-numbers { display flex; align-items baseline; justify-content center; gap 10px; margin-bottom 8px; }
    .daily-actual { font-size 48px; font-weight 800; color #fff; }
    .daily-sep { font-size 32px; color rgba(255,255,255,0.4); }
    .daily-target { font-size 32px; font-weight 600; color rgba(255,255,255,0.5); }
    .daily-unit { font-size 18px; color rgba(255,255,255,0.5); margin-left 6px; }
    .daily-delta { font-size 22px; font-weight 700; margin-left 14px; padding 5px 14px; border-radius 20px; }
    .daily-delta.positive { background rgba(102, 137, 113, 0.3); color var(--status-green); }
    .daily-delta.negative { background rgba(248, 113, 113, 0.2); color var(--status-red); }
    .daily-delta.neutral { background rgba(228, 170, 79, 0.2); color var(--gold-light); }
    
     Progress Bar - brand colors 
    .progress-bar-container { display flex; align-items center; gap 12px; }
    .progress-bar { flex 1; height 12px; background rgba(255,255,255,0.1); border-radius 6px; overflow hidden; }
    .progress-fill { height 100%; border-radius 6px; transition width 0.5s ease; }
    body.ahead .progress-fill { background var(--green); }
    body.on-target .progress-fill { background var(--gold); }
    body.behind .progress-fill { background var(--status-red); }
    body.idle .progress-fill { background var(--status-gray); }
    .progress-hours { font-size 16px; color rgba(255,255,255,0.5); min-width 70px; }
    
    .daily-projection { margin-top 12px; padding-top 12px; border-top 1px solid rgba(228,170,79,0.2); display flex; align-items center; justify-content center; gap 10px; flex-wrap wrap; }
    .projection-label { font-size 13px; color rgba(255,255,255,0.5); text-transform uppercase; }
    .projection-value { font-size 28px; font-weight 800; color #fff; }
    .projection-goal { font-size 18px; color rgba(255,255,255,0.5); }
    .projection-delta { font-size 18px; font-weight 700; padding 4px 12px; border-radius 12px; }
    .projection-delta.positive { background rgba(102, 137, 113, 0.3); color var(--status-green); }
    .projection-delta.negative { background rgba(248, 113, 113, 0.2); color var(--status-red); }
    .projection-delta.neutral { background rgba(228, 170, 79, 0.2); color var(--gold-light); }
    
     Comparison Pills - brand styling 
    .comparisons { display flex; justify-content center; gap 12px; flex-wrap wrap; }
    .comparison-pill { display flex; align-items center; gap 6px; padding 8px 14px; background rgba(0,0,0,0.4); border-radius 20px; font-size 16px; font-weight 600; border 1px solid rgba(228,170,79,0.15); }
    .comparison-label { color rgba(255,255,255,0.5); }
    .comparison-value { font-weight 700; padding 3px 8px; border-radius 10px; }
    .comparison-value.positive { background rgba(102, 137, 113, 0.3); color var(--status-green); }
    .comparison-value.negative { background rgba(248, 113, 113, 0.2); color var(--status-red); }
    .comparison-value.neutral { background rgba(228, 170, 79, 0.2); color var(--gold-light); }
    .streak-pill { background rgba(228, 170, 79, 0.2); border 2px solid rgba(228, 170, 79, 0.4); }
    .streak-icon { font-size 18px; }
    .streak-value { color var(--gold); font-weight 700; }
    
     Info Bar - brand styling 
    .info-bar { display inline-flex; align-items center; background rgba(0,0,0,0.4); border-radius 30px; padding 8px 14px; gap 6px; flex-wrap wrap; justify-content center; border 1px solid rgba(228,170,79,0.15); }
    .info-section { display flex; align-items center; gap 6px; padding 6px 12px; color rgba(255,255,255,0.8); font-size 18px; font-weight 600; }
    .info-divider { width 2px; height 28px; background rgba(228,170,79,0.3); }
    .info-icon { font-size 22px; }
    .stat-group { display flex; flex-direction column; align-items center; padding 0 12px; }
    .stat-group .label { font-size 11px; color var(--gold); text-transform uppercase; }
    .stat-group .value { font-size 22px; font-weight 700; }
    
     TimeStrain Display - brand colors 
    .time-display { position fixed; top 20px; right 420px; text-align right; }
    .time-display .time { font-size 42px; font-weight 700; color rgba(255,255,255,0.9); }
    .time-display .date { font-size 16px; color var(--gold); }
    .strain-display { position fixed; top 20px; left 25px; }
    .strain-label { font-size 12px; color var(--gold); text-transform uppercase; letter-spacing 1px; }
    .strain-name { font-size 28px; font-weight 700; color rgba(255,255,255,0.9); max-width 400px; white-space nowrap; overflow hidden; text-overflow ellipsis; }
    .strain-rate-indicator { margin-top 3px; }
    
     Language Toggle - brand styling 
    .lang-toggle { position fixed; bottom 20px; left 25px; display flex; gap 6px; }
    .lang-btn { padding 6px 14px; border 2px solid rgba(228,170,79,0.3); background rgba(0,0,0,0.4); color rgba(255,255,255,0.6); font-size 14px; font-weight 600; border-radius 12px; cursor pointer; transition all 0.2s; }
    .lang-btnhover { border-color var(--gold); }
    .lang-btn.active { background var(--gold); border-color var(--gold); color #1a1f16; }
    
     Help Button - brand styling 
    .help-btn { position fixed; bottom 20px; right 420px; width 45px; height 45px; border-radius 50%; background rgba(0,0,0,0.4); border 2px solid rgba(228,170,79,0.3); color var(--gold); font-size 24px; font-weight 700; cursor pointer; display flex; align-items center; justify-content center; transition all 0.2s ease; }
    .help-btnhover { background var(--gold); border-color var(--gold); color #1a1f16; }
    
     Help Modal - brand styling 
    .help-modal { display none; position fixed; top 0; left 0; width 100%; height 100%; background rgba(0,0,0,0.9); z-index 1000; align-items center; justify-content center; padding 40px; }
    .help-modal.active { display flex; }
    .help-content { background linear-gradient(145deg, #1a1f16 0%, #2d3a2e 100%); border-radius 24px; padding 40px; max-width 900px; max-height 85vh; overflow-y auto; border 2px solid var(--gold); }
    .help-header { display flex; justify-content space-between; align-items center; margin-bottom 25px; padding-bottom 15px; border-bottom 1px solid rgba(228,170,79,0.3); }
    .help-title { font-size 28px; font-weight 700; color #fff; }
    .help-close { width 40px; height 40px; border-radius 50%; background rgba(0,0,0,0.3); border 2px solid rgba(228,170,79,0.3); color var(--gold); font-size 22px; cursor pointer; transition all 0.2s; }
    .help-closehover { background rgba(248, 113, 113, 0.2); border-color var(--status-red); color var(--status-red); }
    .help-grid { display grid; grid-template-columns repeat(2, 1fr); gap 20px; }
    .help-item { background rgba(0,0,0,0.3); border-radius 14px; padding 18px; border 1px solid rgba(228,170,79,0.1); }
    .help-item-title { font-size 15px; font-weight 700; color var(--gold); margin-bottom 6px; }
    .help-item-desc { font-size 14px; color rgba(255,255,255,0.7); line-height 1.5; }
    .help-colors { display flex; gap 15px; margin-top 20px; padding 15px; background rgba(0,0,0,0.3); border-radius 12px; }
    .help-color { display flex; align-items center; gap 6px; font-size 14px; color rgba(255,255,255,0.7); }
    .help-dot { width 14px; height 14px; border-radius 50%; }
    .help-dot.green { background var(--green); }
    .help-dot.yellow { background var(--gold); }
    .help-dot.red { background var(--status-red); }
    
     Timer Panel Elements - brand styling 
    .timer-header { font-size 16px; font-weight 700; color var(--gold); text-transform uppercase; letter-spacing 3px; margin-bottom 15px; }
    .timer-display { position relative; width 220px; height 220px; margin-bottom 15px; }
    .timer-ring { width 100%; height 100%; transform rotate(-90deg); }
    .timer-ring-bg { fill none; stroke rgba(228,170,79,0.15); stroke-width 12; }
    .timer-ring-progress { fill none; stroke-width 12; stroke-linecap round; transition stroke-dashoffset 1s linear, stroke 0.3s ease; }
    .timer-ring-progress.green { stroke var(--green); }
    .timer-ring-progress.yellow { stroke var(--gold); }
    .timer-ring-progress.red { stroke var(--status-red); }
    .timer-center { position absolute; top 50%; left 50%; transform translate(-50%, -50%); text-align center; }
    .timer-value { font-size 48px; font-weight 900; color #fff; line-height 1; font-variant-numeric tabular-nums; }
    .timer-value.green { color var(--green-bright); }
    .timer-value.yellow { color var(--gold); }
    .timer-value.red { color var(--status-red); }
    .timer-label { font-size 14px; color rgba(255,255,255,0.5); margin-top 6px; }
    .timer-target { font-size 14px; color rgba(255,255,255,0.4); margin-bottom 15px; }
    .timer-target span { color var(--gold); font-weight 600; }
    
     Manual Button - brand styling 
    .manual-btn { width 100%; padding 16px 24px; background linear-gradient(135deg, var(--green) 0%, #5a7a63 100%); border none; border-radius 16px; color white; font-size 18px; font-weight 700; cursor pointer; display flex; align-items center; justify-content center; gap 10px; transition all 0.2s ease; margin-bottom 15px; box-shadow 0 4px 12px rgba(102,137,113,0.3); }
    .manual-btnhover { transform scale(1.02); box-shadow 0 6px 16px rgba(102,137,113,0.4); }
    .manual-btnactive { transform scale(0.98); }
    .manual-btn .icon { font-size 22px; }
    .manual-btn.success { background linear-gradient(135deg, var(--gold) 0%, var(--sungrown) 100%); box-shadow 0 4px 12px rgba(228,170,79,0.3); }
    
     Timer Stats - brand styling 
    .timer-stats { width 100%; display flex; flex-direction column; gap 8px; }
    .timer-stat { display flex; justify-content space-between; align-items center; padding 10px 14px; background rgba(0,0,0,0.3); border-radius 10px; border 1px solid rgba(228,170,79,0.1); }
    .timer-stat-label { font-size 13px; color var(--gold); }
    .timer-stat-value { font-size 16px; font-weight 700; color rgba(255,255,255,0.9); }
    .timer-stat-value.positive { color var(--green-bright); }
    .timer-stat-value.negative { color var(--status-red); }
    
     Animations 
    @keyframes pulse { 0%, 100% { opacity 1; } 50% { opacity 0.7; } }
    @keyframes currentHourPulse { 0%, 100% { border-color rgba(102, 137, 113, 0.6); } 50% { border-color rgba(102, 137, 113, 0.9); } }
    body.ahead .status-badge { animation pulse 2s ease-in-out infinite; }
    body.behind .status-badge { animation pulse 1.5s ease-in-out infinite; }
    .timer-display.overtime .timer-ring-progress { animation pulse 1s ease-in-out infinite; }
  style
head
body class=idle
  div class=strain-display
    div class=strain-label id=strainLabelLine 1 ‚Ä¢ Current Straindiv
    div class=strain-name id=strainName‚Äîdiv
    div class=strain-rate-indicator id=strainRateIndicatordiv
  div
  div class=time-display
    div class=time id=clock----div
    div class=date id=dateLoading...div
  div
  div class=lang-toggle
    button class=lang-btn active id=btnEn onclick=setLanguage('en')ENbutton
    button class=lang-btn id=btnEs onclick=setLanguage('es')ESbutton
  div
  button class=help-btn onclick=toggleHelp()button
  
  div class=help-modal id=helpModal onclick=if(event.target===this)toggleHelp()
    div class=help-content
      div class=help-header
        div class=help-title id=helpTitlei class=ph-duotone ph-chart-pie-slice style=margin-right8pxi Understanding the Scoreboarddiv
        button class=help-close onclick=toggleHelp()‚úïbutton
      div
      div class=help-grid
        div class=help-item
          div class=help-item-titlei class=ph-duotone ph-package style=margin-right6pxi Last Hour (Completed)div
          div class=help-item-desc id=helpLastHourProduction from the last completed hour. Target adjusts for breaks.div
        div
        div class=help-item
          div class=help-item-titlei class=ph-duotone ph-timer style=margin-right6pxi Current Hourdiv
          div class=help-item-desc id=helpCurrentHourCurrent crew count and target for the hour in progress.div
        div
        div class=help-item
          div class=help-item-titlei class=ph-duotone ph-trend-up style=margin-right6pxi Today's Progressdiv
          div class=help-item-desc id=helpTodayTotal so far vs target. Up 5.2 = 5.2 lbs ahead of target.div
        div
        div class=help-item
          div class=help-item-titleüîÆ End of Daydiv
          div class=help-item-desc id=helpProjectionProjected final output if you maintain current pace.div
        div
        div class=help-item
          div class=help-item-titleüéØ Target Ratediv
          div class=help-item-desc id=helpTargetExpected lbstrimmerhr based on this strain's 30-day history.div
        div
        div class=help-item
          div class=help-item-title‚è≤ Bag Timerdiv
          div class=help-item-desc id=helpTimerTime since last 5kg bag. Tracks pace between completions.div
        div
      div
      div class=help-colors
        div class=help-colordiv class=help-dot greendivspan id=helpGreenGreen = Ahead (105%+)spandiv
        div class=help-colordiv class=help-dot yellowdivspan id=helpYellowYellow = On Target (90-105%)spandiv
        div class=help-colordiv class=help-dot reddivspan id=helpRedRed = Behind (&lt;90%)spandiv
      div
    div
  div
  
  div class=main-panel
    div class=scoreboard
      div class=status-badge
        span class=status-icon id=statusIconi class=ph-duotone ph-pauseispan
        span id=statusTextWAITINGspan
      div
      div class=hour-cards
        div class=hour-card last-hour
          div class=hour-card-header id=lastHourHeaderLast Hourdiv
          div class=hour-card-timeslot id=lastHourTimeslot‚Äîdiv
          div class=lbs-row
            span class=actual-lbs id=lastHourLbs‚Äîspan
            span class=separatorspan
            span class=target-lbs id=lastHourTarget‚Äîspan
          div
          div class=lbs-unit id=lbsUnitlbsdiv
          div class=percentage-display
            div class=percentage-value id=lastHourPct‚Äî%div
            div class=percentage-label id=ofTargetLabelof targetdiv
          div
        div
        div class=hour-card current-hour id=currentHourCard style=displaynone;
          div class=hour-card-header id=currentHourHeaderi class=ph-duotone ph-timer style=margin-right6pxi Current Hourdiv
          div class=hour-card-timeslot id=currentHourTimeslot‚Äîdiv
          div class=lbs-row
            span class=actual-lbs id=currentHourTrimmers‚Äîspan
            span class=lbs-unit style=font-size18px;margin-left10px id=trimmersSmallLabeltrimmersspan
          div
          div class=percentage-display
            div class=percentage-value id=currentHourTargetLbs‚Äîdiv
            div class=percentage-label id=lbsTargetLabellbs targetdiv
          div
        div
      div
      
      div class=daily-progress
        div class=daily-header id=dailyHeaderLine 1 Todaydiv
        div class=daily-numbers
          span class=daily-actual id=dailyActual‚Äîspan
          span class=daily-sepspan
          span class=daily-target id=dailyTarget‚Äîspan
          span class=daily-unitlbsspan
          span class=daily-delta id=dailyDelta‚Äîspan
        div
        div class=progress-bar-container
          div class=progress-bardiv class=progress-fill id=progressFill style=width0%divdiv
          span class=progress-hours id=progressHours0 hrsspan
        div
        div class=daily-projection
          span class=projection-label id=projectionLabelEnd of dayspan
          span class=projection-value id=projectionValue‚Äîspan
          span class=projection-goal id=projectionGoalspan
          span class=projection-delta id=projectionDelta‚Äîspan
        div
      div
      div class=comparisons
        div class=comparison-pill id=vsYesterdayPill style=displaynonespan class=comparison-label id=vsYesterdayLabelvs Yesterdayspanspan class=comparison-value id=vsYesterdayValue‚Äîspandiv
        div class=comparison-pill id=vs7DayPill style=displaynonespan class=comparison-label id=vs7DayLabelvs 7-Day Avgspanspan class=comparison-value id=vs7DayValue‚Äîspandiv
        div class=comparison-pill streak-pill id=streakPill style=displaynonespan class=streak-iconi class=ph-duotone ph-fireispanspan class=streak-value id=streakValue0spanspan class=comparison-label id=streakLabelhr streakspandiv
      div
      div class=info-bar
        div class=info-sectionspan class=info-iconi class=ph-duotone ph-users-threeispanspanspan id=crewCount‚Äîspan span id=trimmersLabelTrimmersspanspandiv
        div class=info-dividerdiv
        div class=info-sectionspan class=info-iconi class=ph-duotone ph-crosshairispanspanspan id=targetRateLabelTargetspan span id=targetRate‚Äîspan lbshrspandiv
        div class=info-dividerdiv
        div class=stat-groupspan class=label id=avgTargetLabelAVGspanspan class=value id=avgPercentage‚Äîspandiv
        div class=info-dividerdiv
        div class=stat-groupspan class=label id=bestHourLabelBESTspanspan class=value id=bestHour‚Äîspandiv
      div
      
      !-- Hourly Rate Chart - Bottom --
      div class=chart-container id=chartContainer style=displaynone;
        div class=chart-header id=chartHeaderHourly Performance (lbstrimmer)div
        div class=chart-wrapper
          canvas id=hourlyChartcanvas
        div
      div
    div
  div
  
  div class=timer-panel neutral id=timerPanel
    div class=timer-header id=timerHeader5KG Bag Timerdiv
    div class=timer-display id=timerDisplay
      svg class=timer-ring viewBox=0 0 220 220
        circle class=timer-ring-bg cx=110 cy=110 r=95
        circle class=timer-ring-progress green id=timerRing cx=110 cy=110 r=95 stroke-dasharray=597 stroke-dashoffset=0
      svg
      div class=timer-center
        div class=timer-value green id=timerValue----div
        div class=timer-label id=timerLabelremainingdiv
      div
    div
    div class=timer-targetTarget span id=timerTargetTime----span ‚Ä¢ span id=timerTrimmers0span trimmersdiv
    button class=manual-btn id=manualBtn onclick=logManualEntry()span class=iconi class=ph-duotone ph-packageispanspan id=manualBtnText5KG Bag Completespanbutton
    div class=timer-stats
      div class=timer-statspan class=timer-stat-label id=bagsTodayLabelBags Todayspanspan class=timer-stat-value id=bagsToday0spandiv
      div class=timer-statspan class=timer-stat-label id=avgTodayLabelAvg Todayspanspan class=timer-stat-value id=avgToday----spandiv
      div class=timer-statspan class=timer-stat-label id=vsTargetLabelvs Targetspanspan class=timer-stat-value id=vsTarget‚Äîspandiv
    div
  div

  script
    let data=null,timerData=null,currentLang='en',lastBagTimestamp=null,hourlyChart=null;
    const t={en{currentStrain'Line 1 ‚Ä¢ Current Strain',lastHour'Last Hour (Completed)',currentHour'Current Hour',lbs'lbs',trimmers'trimmers',ofTarget'vs target',lbsTarget'lbs target',trimmersLabel'Line 1 Trimmers',targetRate'Target',avgLbs'AVG',bestLbs'BEST',todaysProgress'LINE 1 TODAY',endOfDay'End of day',lbsGoal'lbs goal',upBy'Up',downBy'Down',vsYesterday'vs Yesterday',vs7Day'vs 7-Day Avg',hrStreak'hr streak',hrs'hrs',aheadOfTarget'AHEAD OF TARGET',onTarget'ON TARGET',behindTarget'BEHIND TARGET',waiting'WAITING FOR DATA',bagTimer'5KG BAG TIMER',remaining'remaining',overtime'OVERTIME',bagComplete'5KG Bag Complete',logged'Logged!',bagsToday'Bags Today',avgToday'Avg Today',vsTargetTimer'vs Target',strainRate'Strain-specific rate',fallbackRate'Using avg rate',helpTitle'Understanding the Scoreboard',helpGreen'Green = Ahead (105%+)',helpYellow'Yellow = On Target (90-105%)',helpRed'Red = Behind (90%)',chartHeader'HOURLY PERFORMANCE (LBSTRIMMER)',onBreak'ON BREAK',paused'PAUSED'},es{currentStrain'L√≠nea 1 ‚Ä¢ Variedad Actual',lastHour'√öltima Hora (Completa)',currentHour'Hora Actual',lbs'lbs',trimmers'triminadores',ofTarget'vs meta',lbsTarget'lbs meta',trimmersLabel'Triminadores L1',targetRate'Meta',avgLbs'PROM',bestLbs'MEJOR',todaysProgress'L√çNEA 1 HOY',endOfDay'Fin del d√≠a',lbsGoal'lbs meta',upBy'Arriba',downBy'Abajo',vsYesterday'vs Ayer',vs7Day'vs Prom 7 D√≠as',hrStreak'hrs seguidas',hrs'hrs',aheadOfTarget'ARRIBA DE LA META',onTarget'EN LA META',behindTarget'DEBAJO DE LA META',waiting'ESPERANDO DATOS',bagTimer'TEMPORIZADOR 5KG',remaining'restante',overtime'TIEMPO EXTRA',bagComplete'Bolsa 5KG Lista',logged'¬°Registrado!',bagsToday'Bolsas Hoy',avgToday'Prom Hoy',vsTargetTimer'vs Meta',strainRate'Tasa espec√≠fica',fallbackRate'Usando tasa prom',helpTitle'Entendiendo el Marcador',helpGreen'Verde = Adelante (105%+)',helpYellow'Amarillo = En Meta (90-105%)',helpRed'Rojo = Atr√°s (90%)',chartHeader'RENDIMIENTO POR HORA (LBSTRIMINADOR)',onBreak'EN DESCANSO',paused'PAUSADO'}};
    
     Break schedule [startHour, startMin, endHour, endMin]
    const BREAKS = [
      [9, 0, 9, 10],       900-910 AM break
      [12, 0, 12, 30],     1200-1230 PM lunch
      [14, 0, 14, 10],     200-210 PM break
      [16, 20, 16, 30]     420-430 PM cleanupEOD
    ];
    const WORKDAY_START = 7  60;   700 AM in minutes
    const WORKDAY_END = 16  60 + 30;   430 PM in minutes
    
    function getWorkingSecondsSince(startTime) {
      if (!startTime) return 0;
      const now = new Date();
      
       If different day, return 0 (timer resets daily)
      if (startTime.toDateString() !== now.toDateString()) {
        return 0;
      }
      
      let startMins = startTime.getHours()  60 + startTime.getMinutes();
      const startSecs = startTime.getSeconds();
      let nowMins = now.getHours()  60 + now.getMinutes();
      let nowSecs = now.getSeconds();
      
       Before workday - no time elapsed
      if (nowMins  WORKDAY_START) return 0;
      
       Cap at workday end
      if (nowMins = WORKDAY_END) {
        nowMins = WORKDAY_END;
        nowSecs = 0;
      }
      
       If start was before workday, adjust to workday start
      if (startMins  WORKDAY_START) {
        startMins = WORKDAY_START;
      }
      
       Check if we're currently in a break - if so, cap nowMinsnowSecs to break start
      for (const [bStartH, bStartM, bEndH, bEndM] of BREAKS) {
        const breakStart = bStartH  60 + bStartM;
        const breakEnd = bEndH  60 + bEndM;
        if (nowMins = breakStart && nowMins  breakEnd) {
           We're in a break - freeze time at break start
          nowMins = breakStart;
          nowSecs = 0;
          break;
        }
      }
      
       Calculate total seconds
      let totalSecs = (nowMins  60 + nowSecs) - (startMins  60 + startSecs);
      
       Subtract any completed break time that overlaps our range
      for (const [bStartH, bStartM, bEndH, bEndM] of BREAKS) {
        const breakStartSecs = (bStartH  60 + bStartM)  60;
        const breakEndSecs = (bEndH  60 + bEndM)  60;
        const rangeStartSecs = startMins  60 + startSecs;
        const rangeEndSecs = nowMins  60 + nowSecs;
        
        if (breakEndSecs  rangeStartSecs && breakStartSecs  rangeEndSecs) {
          const overlapStart = Math.max(breakStartSecs, rangeStartSecs);
          const overlapEnd = Math.min(breakEndSecs, rangeEndSecs);
          if (overlapEnd  overlapStart) {
            totalSecs -= (overlapEnd - overlapStart);
          }
        }
      }
      
      return Math.max(0, totalSecs);
    }
    
    function isOnBreakOrAfterHours() {
      const now = new Date();
      const nowMins = now.getHours()  60 + now.getMinutes();
      
       Before workday
      if (nowMins  WORKDAY_START) return { onBreak true, afterHours true };
      
       After workday end
      if (nowMins = WORKDAY_END) return { onBreak true, afterHours true };
      
       Check if currently in a break
      for (const [bStartH, bStartM, bEndH, bEndM] of BREAKS) {
        const breakStart = bStartH  60 + bStartM;
        const breakEnd = bEndH  60 + bEndM;
        if (nowMins = breakStart && nowMins  breakEnd) {
          return { onBreak true, afterHours false };
        }
      }
      
      return { onBreak false, afterHours false };
    }
    
    function toggleHelp(){document.getElementById('helpModal').classList.toggle('active');document.getElementById('helpTitle').textContent=t[currentLang].helpTitle;document.getElementById('helpGreen').textContent=t[currentLang].helpGreen;document.getElementById('helpYellow').textContent=t[currentLang].helpYellow;document.getElementById('helpRed').textContent=t[currentLang].helpRed;}
    
     API Configuration - UPDATE THIS AFTER DEPLOYING Scoreboard-API.gs
    var API_URL = 'httpsscript.google.commacrossAKfycbxDAHSFl9cedGS49L3Lf5ztqy-SSToYigyA30ZtsdpmWNAR9H61X_Mm48JOOTGqqr-Zexec';
    
    document.addEventListener('DOMContentLoaded',function(){updateClock();setInterval(updateClock,1000);loadData();setInterval(loadData,15000);setInterval(renderTimer,1000);});
    function setLanguage(lang){currentLang=lang;document.getElementById('btnEn').classList.toggle('active',lang==='en');document.getElementById('btnEs').classList.toggle('active',lang==='es');document.getElementById('strainLabel').textContent=t[lang].currentStrain;document.getElementById('lastHourHeader').textContent=t[lang].lastHour;document.getElementById('currentHourHeader').textContent=t[lang].currentHour;document.getElementById('lbsUnit').textContent=t[lang].lbs;document.getElementById('trimmersSmallLabel').textContent=t[lang].trimmers;document.getElementById('ofTargetLabel').textContent=t[lang].ofTarget;document.getElementById('lbsTargetLabel').textContent=t[lang].lbsTarget;document.getElementById('trimmersLabel').textContent=t[lang].trimmersLabel;document.getElementById('targetRateLabel').textContent=t[lang].targetRate;document.getElementById('avgTargetLabel').textContent=t[lang].avgLbs;document.getElementById('bestHourLabel').textContent=t[lang].bestLbs;document.getElementById('dailyHeader').textContent=t[lang].todaysProgress;document.getElementById('vsYesterdayLabel').textContent=t[lang].vsYesterday;document.getElementById('vs7DayLabel').textContent=t[lang].vs7Day;document.getElementById('streakLabel').textContent=t[lang].hrStreak;document.getElementById('timerHeader').textContent=t[lang].bagTimer;document.getElementById('manualBtnText').textContent=t[lang].bagComplete;document.getElementById('bagsTodayLabel').textContent=t[lang].bagsToday;document.getElementById('avgTodayLabel').textContent=t[lang].avgToday;document.getElementById('vsTargetLabel').textContent=t[lang].vsTargetTimer;document.getElementById('chartHeader').textContent=t[lang].chartHeader;updateClock();renderScoreboard();renderTimer();}
    function updateClock(){const now=new Date(),h=now.getHours()%1212,m=now.getMinutes().toString().padStart(2,'0'),ap=now.getHours()=12'PM''AM';document.getElementById('clock').textContent=`${h}${m} ${ap}`;document.getElementById('date').textContent=now.toLocaleDateString(currentLang==='es''es-MX''en-US',{weekday'long',month'short',day'numeric'});}
    
    function loadData(){
      fetch(API_URL + 'action=scoreboard')
        .then(function(response) { return response.json(); })
        .then(function(r) {
          data = r.scoreboard;
          timerData = r.timer;
          if (timerData && timerData.lastBagTime) lastBagTimestamp = new Date(timerData.lastBagTime);
          renderScoreboard();
          renderTimer();
        })
        .catch(function(e) {
          console.error('Load error', e);
        });
    }
    
    function renderHourlyChart(hourlyRates, targetRate) {
      const container = document.getElementById('chartContainer');
      if (!hourlyRates  hourlyRates.length === 0) {
        container.style.display = 'none';
        return;
      }
      container.style.display = 'block';
      
      const labels = hourlyRates.map(h = {
         Shorten time slot labels 900 AM ‚Äì 1000 AM - 9-10
        const match = h.timeSlot.match((d+)d+s(AMPM)s[‚Äì-]s(d+)d+i);
        if (match) {
          let start = parseInt(match[1]);
          let end = parseInt(match[3]);
          return `${start}-${end}`;
        }
        return h.timeSlot;
      });
      
      const rates = hourlyRates.map(h = parseFloat(h.rate.toFixed(2)));
      const targets = hourlyRates.map(h = parseFloat(h.target.toFixed(2)));
      
       Color bars based on performance - using brand colors
      const barColors = hourlyRates.map(h = {
        const pct = (h.rate  h.target)  100;
        if (pct = 105) return '#668971';   Brand green
        if (pct = 90) return '#e4aa4f';    Brand gold
        return '#f87171';                    Red
      });
      
       If chart exists, update data instead of recreating
      if (hourlyChart) {
        hourlyChart.data.labels = labels;
        hourlyChart.data.datasets[0].data = rates;
        hourlyChart.data.datasets[0].backgroundColor = barColors;
        hourlyChart.data.datasets[1].data = targets;
        hourlyChart.update('none');
        return;
      }
      
      const ctx = document.getElementById('hourlyChart').getContext('2d');
      
      hourlyChart = new Chart(ctx, {
        type 'bar',
        data {
          labels labels,
          datasets [
            {
              label 'Actual',
              data rates,
              backgroundColor barColors,
              borderRadius 4,
              barThickness 32
            },
            {
              label 'Target',
              data targets,
              type 'line',
              borderColor 'rgba(228,170,79,0.6)',
              borderWidth 2,
              borderDash [5, 5],
              pointRadius 0,
              fill false
            }
          ]
        },
        options {
          responsive true,
          maintainAspectRatio false,
          animation false,
          plugins {
            legend { display false },
            tooltip {
              callbacks {
                label function(context) {
                  return context.dataset.label + ' ' + context.parsed.y + ' lbshr';
                }
              }
            }
          },
          scales {
            x {
              grid { display false },
              ticks { color 'rgba(255,255,255,0.6)', font { size 12 } }
            },
            y {
              beginAtZero true,
              grid { color 'rgba(228,170,79,0.1)' },
              ticks { color 'rgba(255,255,255,0.6)', font { size 12 } }
            }
          }
        }
      });
    }
    
    function renderScoreboard(){if(!data)return;const lastHourLbs=data.lastHourLbs0,lastHourTarget=data.lastHourTarget0,lastHourTrimmers=data.lastHourTrimmers0,lastTimeSlot=data.lastTimeSlot'‚Äî',currentHourTrimmers=data.currentHourTrimmers0,currentHourTarget=data.currentHourTarget0,currentTimeSlot=data.currentTimeSlot'',targetRate=data.targetRate0,strain=data.strain'‚Äî',todayLbs=data.todayLbs0,todayTarget=data.todayTarget0,todayPct=data.todayPercentage0,hoursLogged=data.hoursLogged0,avgPct=data.avgPercentage0,bestPct=data.bestPercentage0,streak=data.streak0,lastHourPct=lastHourTarget0(lastHourLbslastHourTarget)1000,lastHourDelta=lastHourLbs-lastHourTarget,statusPct=todayPct0todayPctavgPct;let status='idle',statusIcon='‚è∏',statusKey='waiting';if(todayLbs0lastHourLbs0){if(statusPct=105){status='ahead';statusIcon='üî•';statusKey='aheadOfTarget';}else if(statusPct=90){status='on-target';statusIcon='‚úì';statusKey='onTarget';}else if(statusPct0){status='behind';statusIcon='‚ö†';statusKey='behindTarget';}}document.body.className=status;document.getElementById('statusIcon').textContent=statusIcon;document.getElementById('statusText').textContent=t[currentLang][statusKey];document.getElementById('lastHourLbs').textContent=lastHourLbs0lastHourLbs.toFixed(1)'‚Äî';document.getElementById('lastHourTarget').textContent=lastHourTarget0lastHourTarget.toFixed(1)'‚Äî';document.getElementById('lastHourTimeslot').textContent=lastTimeSlot;
     Show lbs delta instead of percentage
    const lhp = document.getElementById('lastHourPct');
    if(lastHourTarget0){const deltaAbs=Math.abs(lastHourDelta).toFixed(1);if(lastHourDelta=0.05){lhp.textContent=`+${deltaAbs} lbs`;lhp.style.color='#7a9d87';}else if(lastHourDelta=-0.05){lhp.textContent=`-${deltaAbs} lbs`;lhp.style.color='#f87171';}else{lhp.textContent=`0 lbs`;lhp.style.color='#e4aa4f';}}else{lhp.textContent='‚Äî';lhp.style.color='rgba(255,255,255,0.5)';}
    const chc=document.getElementById('currentHourCard');if(currentHourTrimmers0){chc.style.display='block';document.getElementById('currentHourTrimmers').textContent=currentHourTrimmers;document.getElementById('currentHourTimeslot').textContent=currentTimeSlot;document.getElementById('currentHourTargetLbs').textContent=currentHourTarget0currentHourTarget.toFixed(1)'‚Äî';}else{chc.style.display='none';}
    
     Render the hourly chart
    renderHourlyChart(data.hourlyRates, targetRate);
    
    document.getElementById('dailyActual').textContent=todayLbs0todayLbs.toFixed(1)'‚Äî';document.getElementById('dailyTarget').textContent=todayTarget0todayTarget.toFixed(1)'‚Äî';const todayDelta=data.todayDelta0,dde=document.getElementById('dailyDelta');if(todayTarget0){const da=Math.abs(todayDelta).toFixed(1);if(todayDelta=0.1){dde.textContent=`‚Üë ${t[currentLang].upBy} ${da}`;dde.className='daily-delta positive';}else if(todayDelta=-0.1){dde.textContent=`‚Üì ${t[currentLang].downBy} ${da}`;dde.className='daily-delta negative';}else{dde.textContent='= On pace';dde.className='daily-delta neutral';}}else{dde.textContent='‚Äî';dde.className='daily-delta neutral';}const effectiveHours=data.effectiveHourshoursLogged;document.getElementById('progressHours').textContent=`${effectiveHours.toFixed(1)} ${t[currentLang].hrs}`;document.getElementById('progressFill').style.width=`${Math.min(100,todayPctavgPct0)}%`;const projectedTotal=data.projectedTotal0,dailyGoal=data.dailyGoal0,projectedDelta=data.projectedDelta0;document.getElementById('projectionLabel').textContent=t[currentLang].endOfDay;document.getElementById('projectionValue').textContent=projectedTotal0projectedTotal.toFixed(1)'‚Äî';document.getElementById('projectionGoal').textContent=dailyGoal0` ${dailyGoal.toFixed(1)} ${t[currentLang].lbsGoal}`'';const pde=document.getElementById('projectionDelta');if(dailyGoal0&&projectedTotal0){const pda=Math.abs(projectedDelta).toFixed(1);if(projectedDelta=0.5){pde.textContent=`‚Üë +${pda}`;pde.className='projection-delta positive';}else if(projectedDelta=-0.5){pde.textContent=`‚Üì -${pda}`;pde.className='projection-delta negative';}else{pde.textContent='= On pace';pde.className='projection-delta neutral';}}else{pde.textContent='‚Äî';pde.className='projection-delta neutral';}renderComparison('vsYesterday',data.vsYesterday);renderComparison('vs7Day',data.vs7Day);document.getElementById('streakPill').style.display=streak=2'flex''none';document.getElementById('streakValue').textContent=streak;const displayTrimmers=currentHourTrimmers0currentHourTrimmerslastHourTrimmers;document.getElementById('crewCount').textContent=displayTrimmers0displayTrimmers'‚Äî';document.getElementById('targetRate').textContent=targetRate0targetRate.toFixed(2)'‚Äî';document.getElementById('strainName').textContent=strain'‚Äî';const avgEl=document.getElementById('avgPercentage'),bestEl=document.getElementById('bestHour');
    if(data.avgDelta!==undefined&&data.avgDelta!==0){avgEl.textContent=(data.avgDelta=0'+''')+data.avgDelta.toFixed(1);avgEl.style.color=data.avgDelta=0.05'#7a9d87'data.avgDelta=-0.05'#f87171''#e4aa4f';}else if(data.avgDelta===0){avgEl.textContent='0';avgEl.style.color='#e4aa4f';}else{avgEl.textContent='‚Äî';avgEl.style.color='rgba(255,255,255,0.9)';}
    if(data.bestDelta!==undefined&&data.bestDelta!==0){bestEl.textContent=(data.bestDelta=0'+''')+data.bestDelta.toFixed(1);bestEl.style.color=data.bestDelta=0.05'#7a9d87'data.bestDelta=-0.05'#f87171''#e4aa4f';}else if(data.bestDelta===0){bestEl.textContent='0';bestEl.style.color='#e4aa4f';}else{bestEl.textContent='‚Äî';bestEl.style.color='rgba(255,255,255,0.9)';}
    const sri=document.getElementById('strainRateIndicator');if(data.usingStrainRate){sri.innerHTML=`span style=font-size12px;colorrgba(122,157,135,0.9)${t[currentLang].strainRate}span`;}else if(strain&&strain!=='‚Äî'){sri.innerHTML=`span style=font-size12px;colorrgba(228,170,79,0.9)${t[currentLang].fallbackRate}span`;}else{sri.innerHTML='';}}
    function renderTimer(){const targetSec=(timerData&&timerData.targetSeconds)0,trimmers=(timerData&&timerData.currentTrimmers)0,bagsToday=(timerData&&timerData.bagsToday)0,avgSecToday=(timerData&&timerData.avgSecondsToday)0;
      
       Get breakafter hours status
      const breakStatus = isOnBreakOrAfterHours();
      
       Calculate working time (excludes breaks)
      let elapsedSec=0;
      if(lastBagTimestamp)elapsedSec=getWorkingSecondsSince(lastBagTimestamp);
      
      let remainingSec=targetSec0targetSec-elapsedSecelapsedSec;
      const isOvertime=targetSec0&&remainingSec0&&!breakStatus.onBreak;
      const displaySec=Math.abs(targetSec0remainingSecelapsedSec);
      
      let colorClass='neutral';
      if(targetSec0elapsedSec0){
        colorClass='green';
        if(breakStatus.onBreak){
          colorClass='yellow';
        }else if(targetSec0){
          if(isOvertime)colorClass='red';
          else if(remainingSectargetSec0.2)colorClass='yellow';
        }
      }
      
      const tp=document.getElementById('timerPanel'),tv=document.getElementById('timerValue'),tl=document.getElementById('timerLabel'),tr=document.getElementById('timerRing'),td=document.getElementById('timerDisplay');
      
       Update panel background color
      tp.className='timer-panel '+colorClass;
      
       Show paused state during breaksafter hours
      if(breakStatus.onBreak){
        tv.textContent=breakStatus.afterHours'----'formatTime(displaySec);
        tv.className='timer-value yellow';
        tl.textContent=breakStatus.afterHourst[currentLang].pausedt[currentLang].onBreak;
      }else{
        tv.textContent=(targetSec0elapsedSec0)formatTime(displaySec)'----';
        tv.className='timer-value '+(colorClass==='neutral'''colorClass);
        tl.textContent=(targetSec===0&&elapsedSec0)(currentLang==='es''transcurrido''elapsed')isOvertimet[currentLang].overtimet[currentLang].remaining;
      }
      
      const circ=2Math.PI95;let prog=0;
      if(breakStatus.onBreak){
         Keep ring at current position during breaks
        prog=targetSec0&&elapsedSec0Math.min(1,elapsedSectargetSec)0;
      }else if(targetSec0){
        prog=isOvertime1elapsedSectargetSec;
      }
      tr.style.strokeDashoffset=circ(1-Math.min(1,prog));
      tr.className='timer-ring-progress '+(colorClass==='neutral''green'colorClass);
      td.classList.toggle('overtime',isOvertime&&!breakStatus.onBreak);
      
      document.getElementById('timerTargetTime').textContent=targetSec0formatTime(targetSec)'----';document.getElementById('timerTrimmers').textContent=trimmers'‚Äî';document.getElementById('bagsToday').textContent=bagsToday;document.getElementById('avgToday').textContent=avgSecToday0formatTime(avgSecToday)'----';const vt=document.getElementById('vsTarget');if(avgSecToday0&&targetSec0){const diff=targetSec-avgSecToday,dm=Math.round(diff60);if(dm0){vt.textContent=`+${dm} min`;vt.className='timer-stat-value positive';}else if(dm0){vt.textContent=`${dm} min`;vt.className='timer-stat-value negative';}else{vt.textContent='On pace';vt.className='timer-stat-value';}}else{vt.textContent='‚Äî';vt.className='timer-stat-value';}}
    function formatTime(s){return`${Math.floor(s60)}${(s%60).toString().padStart(2,'0')}`;}
    function logManualEntry(){
      const btn=document.getElementById('manualBtn'),txt=document.getElementById('manualBtnText');
      btn.disabled=true;
      btn.classList.add('success');
      txt.textContent=t[currentLang].logged;
      
      fetch(API_URL + 'action=logBag', { method 'POST' })
        .then(function(response) { return response.json(); })
        .then(function(r) {
          if (r.success) {
            lastBagTimestamp = new Date();
            renderTimer();
            setTimeout(loadData, 1000);
          }
          setTimeout(function(){
            btn.disabled=false;
            btn.classList.remove('success');
            txt.textContent=t[currentLang].bagComplete;
          }, 2000);
        })
        .catch(function(e) {
          console.error('Log bag error', e);
          btn.disabled=false;
          btn.classList.remove('success');
          txt.textContent=t[currentLang].bagComplete;
        });
    }
    function renderComparison(prefix,value){const pill=document.getElementById(prefix+'Pill'),ve=document.getElementById(prefix+'Value');if(value===nullvalue===undefined){pill.style.display='none';return;}pill.style.display='flex';const r=Math.round(value);ve.textContent=`${r=0'+'''}${r}%`;ve.classList.remove('positive','negative','neutral');ve.classList.add(r2'positive'r-2'negative''neutral');}
  script
body
html
