@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&family=Space+Mono:wght@400;700&family=Manrope:wght@300;400;500;600;700&family=DM+Serif+Display&family=Source+Sans+3:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500;600&display=swap');
@import "tailwindcss";

/* ============================================
   THEME: RELAY (default) — Holographic void
   ============================================ */
[data-theme="relay"], :root {
  --bg-primary: #020403;
  --bg-card: rgba(255,255,255,0.025);
  --bg-card-hover: rgba(255,255,255,0.045);
  --bg-glass: rgba(255,255,255,0.03);
  --bg-glass-hover: rgba(255,255,255,0.055);
  --border-card: rgba(255,255,255,0.05);
  --border-glass: rgba(255,255,255,0.07);
  --border-subtle: rgba(255,255,255,0.03);
  --glass-shadow: 0 1px 2px rgba(0,0,0,0.3), 0 4px 12px rgba(0,0,0,0.15), inset 0 0.5px 0 rgba(255,255,255,0.08);
  --glass-shadow-hover: 0 2px 4px rgba(0,0,0,0.3), 0 8px 32px rgba(0,0,0,0.2), 0 24px 48px rgba(0,0,0,0.1), inset 0 0.5px 0 rgba(255,255,255,0.12);
  --glass-highlight: linear-gradient(180deg, rgba(255,255,255,0.14) 0%, rgba(255,255,255,0.03) 20%, rgba(255,255,255,0) 50%);
  --glass-highlight-hover: linear-gradient(180deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.04) 25%, rgba(255,255,255,0) 60%);

  --text-primary: #f0ece4;
  --text-secondary: rgba(240,236,228,0.6);
  --text-tertiary: rgba(240,236,228,0.35);

  --accent-gold: #e4aa4f;
  --accent-cyan: #00f0ff;
  --accent-green: #00ff88;
  --accent-red: #ff3344;
  --accent-blue: #3b82f6;
  --accent-violet: #8b5cf6;

  --font-display: 'Outfit', sans-serif;
  --font-body: 'Manrope', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  --font-stat: 'Space Mono', monospace;

  --card-radius: 12px;
  --card-blur: 48px;
  --card-shadow: var(--glass-shadow);
  --transition-speed: 200ms;
  --transition-ease: cubic-bezier(0.4, 0, 0.2, 1);

  --sidebar-bg: rgba(255,255,255,0.015);
  --input-bg: rgba(255,255,255,0.05);
  --input-border: rgba(255,255,255,0.08);
}

/* ============================================
   THEME: SOLARIS — Warm Japanese-inspired
   ============================================ */
[data-theme="solaris"] {
  --bg-primary: #0a0806;
  --bg-card: rgba(212,168,83,0.035);
  --bg-card-hover: rgba(212,168,83,0.06);
  --bg-glass: rgba(212,168,83,0.04);
  --bg-glass-hover: rgba(212,168,83,0.07);
  --border-card: rgba(212,168,83,0.06);
  --border-glass: rgba(212,168,83,0.08);
  --border-subtle: rgba(212,168,83,0.04);
  --glass-shadow: 0 1px 2px rgba(0,0,0,0.3), 0 4px 12px rgba(0,0,0,0.2), inset 0 0.5px 0 rgba(255,240,200,0.08);
  --glass-shadow-hover: 0 2px 4px rgba(0,0,0,0.3), 0 8px 32px rgba(0,0,0,0.25), 0 24px 48px rgba(0,0,0,0.12), inset 0 0.5px 0 rgba(255,240,200,0.12);
  --glass-highlight: linear-gradient(180deg, rgba(255,240,200,0.12) 0%, rgba(212,168,83,0.03) 20%, rgba(212,168,83,0) 50%);
  --glass-highlight-hover: linear-gradient(180deg, rgba(255,240,200,0.18) 0%, rgba(212,168,83,0.04) 25%, rgba(212,168,83,0) 60%);

  --text-primary: #f5f0e8;
  --text-secondary: rgba(245,240,232,0.6);
  --text-tertiary: rgba(245,240,232,0.35);

  --accent-gold: #d4a853;
  --accent-cyan: #7a9e7e;
  --accent-green: #7a9e7e;
  --accent-red: #c47a7a;
  --accent-blue: #7a9eb8;
  --accent-violet: #a87ab8;

  --font-display: 'DM Serif Display', serif;
  --font-body: 'Source Sans 3', sans-serif;
  --font-mono: 'IBM Plex Mono', monospace;
  --font-stat: 'IBM Plex Mono', monospace;

  --card-radius: 16px;
  --card-blur: 48px;
  --card-shadow: var(--glass-shadow);
  --transition-speed: 350ms;
  --transition-ease: cubic-bezier(0.4, 0, 0.2, 1);

  --sidebar-bg: rgba(212,168,83,0.02);
  --input-bg: rgba(212,168,83,0.06);
  --input-border: rgba(212,168,83,0.1);
}

/* ============================================
   BASE STYLES
   ============================================ */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-body);
  font-size: 13px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* ============================================
   RELAY NOISE TEXTURE (SVG background)
   ============================================ */
[data-theme="relay"] body::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background:
    radial-gradient(ellipse 120% 80% at 30% 20%, rgba(0,240,255,0.02) 0%, transparent 70%),
    radial-gradient(ellipse 100% 60% at 70% 70%, rgba(139,92,246,0.015) 0%, transparent 60%),
    radial-gradient(ellipse 80% 80% at 50% 50%, rgba(255,255,255,0.008) 0%, transparent 50%),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='400' height='400' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
}

/* ============================================
   SOLARIS GRAIN TEXTURE
   ============================================ */
[data-theme="solaris"] body::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: 0.03;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='turbulence' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)'/%3E%3C/svg%3E");
}

/* ============================================
   SCROLLBAR
   ============================================ */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border-card); border-radius: 2px; }

/* ============================================
   ANIMATIONS
   ============================================ */
@keyframes breathe {
  0%, 100% { box-shadow: 0 0 0 rgba(0,240,255,0); }
  50% { box-shadow: 0 0 12px rgba(0,240,255,0.06); }
}

/* Glass card entry pulse — ripple ring that fades out */
@keyframes glass-pulse-ring {
  0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.15), var(--glass-shadow); }
  40% { box-shadow: 0 0 0 6px rgba(255,255,255,0), var(--glass-shadow); }
  100% { box-shadow: 0 0 0 0 rgba(255,255,255,0), var(--glass-shadow); }
}

/* Alert glow pulse */
@keyframes alert-glow {
  0%, 100% { background-position: 50% 50%; opacity: 0.6; }
  50% { background-position: 50% 40%; opacity: 1; }
}

/* Card entrance slide */
@keyframes card-enter {
  0% { opacity: 0; transform: translateX(8px) scale(0.98); }
  100% { opacity: 1; transform: translateX(0) scale(1); }
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes float-particle {
  0% { transform: translateY(0) translateX(0); opacity: 0; }
  10% { opacity: 0.4; }
  90% { opacity: 0.4; }
  100% { transform: translateY(-100vh) translateX(20px); opacity: 0; }
}

[data-theme="relay"] .card-breathe {
  animation: breathe 8s ease-in-out infinite;
}

.dot-pulse {
  animation: pulse-dot 2s ease-in-out infinite;
}

/* ============================================
   CHROMATIC ABERRATION (Relay only)
   ============================================ */
[data-theme="relay"] .chromatic {
  text-shadow:
    0.5px 0 0 rgba(255,51,68,0.3),
    -0.5px 0 0 rgba(0,240,255,0.3);
}

[data-theme="solaris"] .chromatic {
  text-shadow: none;
}

/* ============================================
   PARTICLES (Relay only)
   ============================================ */
.particle {
  position: fixed;
  width: 1px;
  height: 1px;
  background: var(--accent-cyan);
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}

[data-theme="solaris"] .particle { display: none; }

/* ============================================
   EKG HEARTBEAT SPARKLINE
   ============================================ */
@keyframes ekg-trace {
  0% { stroke-dashoffset: 300; }
  100% { stroke-dashoffset: -300; }
}

@keyframes ekg-dot {
  0%, 90%, 100% { opacity: 0; r: 2; }
  95% { opacity: 0.8; r: 3; }
}

/* ============================================
   AMBIENT STATE BACKGROUND
   ============================================ */
[data-theme="relay"] .ambient-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.4;
  transition: background 8s ease;
}

[data-theme="relay"] .ambient-bg[data-state="ok"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(0,255,136,0.02) 0%, transparent 50%);
}

[data-theme="relay"] .ambient-bg[data-state="behind"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(228,170,79,0.03) 0%, transparent 50%);
}

[data-theme="relay"] .ambient-bg[data-state="alert"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(255,51,68,0.03) 0%, transparent 50%);
}

[data-theme="solaris"] .ambient-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.3;
  transition: background 8s ease;
}

[data-theme="solaris"] .ambient-bg[data-state="ok"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(122,158,126,0.04) 0%, transparent 50%);
}

[data-theme="solaris"] .ambient-bg[data-state="behind"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(212,168,83,0.04) 0%, transparent 50%);
}

[data-theme="solaris"] .ambient-bg[data-state="alert"] {
  background: radial-gradient(ellipse at 50% 80%, rgba(196,122,122,0.04) 0%, transparent 50%);
}

/* ============================================
   CARD PARALLAX DEPTH
   ============================================ */
.depth-card {
  transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1);
  transform-style: preserve-3d;
  will-change: transform;
}

.depth-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.25), 0 16px 48px rgba(0,0,0,0.2), inset 0 0.5px 0 rgba(255,255,255,0.06);
}

/* ============================================
   WAR ROOM CLOCK
   ============================================ */
.clock-strip {
  display: flex;
  gap: 20px;
  align-items: center;
}

.clock-zone {
  display: flex;
  align-items: baseline;
  gap: 4px;
}

.clock-time {
  font-family: var(--font-stat);
  font-size: 11px;
  color: var(--text-primary);
  letter-spacing: 0.05em;
  font-variant-numeric: tabular-nums;
}

.clock-label {
  font-family: var(--font-mono);
  font-size: 8px;
  color: var(--text-tertiary);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

/* ============================================
   LIQUID GLASS UTILITIES
   ============================================ */

/* Full liquid glass panel */
.liquid-glass {
  position: relative;
  background: var(--bg-glass);
  backdrop-filter: blur(var(--card-blur)) saturate(1.3) brightness(1.05);
  -webkit-backdrop-filter: blur(var(--card-blur)) saturate(1.3) brightness(1.05);
  border: 1px solid var(--border-glass);
  border-radius: var(--card-radius);
  box-shadow: var(--glass-shadow);
  transition: all var(--transition-speed) var(--transition-ease, cubic-bezier(0.4, 0, 0.2, 1));
  overflow: hidden;
}

/* Specular top-edge highlight */
.liquid-glass::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: var(--glass-highlight);
  pointer-events: none;
  z-index: 1;
}

.liquid-glass:hover {
  background: var(--bg-glass-hover);
  backdrop-filter: blur(calc(var(--card-blur) + 8px)) saturate(1.4) brightness(1.08);
  -webkit-backdrop-filter: blur(calc(var(--card-blur) + 8px)) saturate(1.4) brightness(1.08);
  box-shadow: var(--glass-shadow-hover);
}

.liquid-glass:hover::after {
  background: var(--glass-highlight-hover);
}

/* Prismatic border — Relay only, subtle refraction */
[data-theme="relay"] .liquid-glass {
  border-color: transparent;
  background-clip: padding-box;
}
[data-theme="relay"] .liquid-glass::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.12),
    rgba(0,240,255,0.06),
    rgba(139,92,246,0.05),
    rgba(255,255,255,0.08)
  );
  z-index: -1;
  pointer-events: none;
}

/* Warm prismatic border — Solaris */
[data-theme="solaris"] .liquid-glass {
  border-color: transparent;
  background-clip: padding-box;
}
[data-theme="solaris"] .liquid-glass::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(255,240,200,0.1),
    rgba(212,168,83,0.06),
    rgba(196,140,60,0.05),
    rgba(255,240,200,0.08)
  );
  z-index: -1;
  pointer-events: none;
}

/* Subtle variant for nested elements */
.liquid-glass-subtle {
  position: relative;
  background: var(--bg-card);
  backdrop-filter: blur(24px) saturate(1.2);
  -webkit-backdrop-filter: blur(24px) saturate(1.2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--card-radius);
  box-shadow: 0 1px 3px rgba(0,0,0,0.15), inset 0 0.5px 0 rgba(255,255,255,0.05);
  transition: all var(--transition-speed) var(--transition-ease, cubic-bezier(0.4, 0, 0.2, 1));
}

.liquid-glass-subtle::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(180deg, rgba(255,255,255,0.06) 0%, transparent 30%);
  pointer-events: none;
  z-index: 1;
}

/* Elevated variant — strong floating feel */
.liquid-glass-elevated {
  position: relative;
  background: var(--bg-glass);
  backdrop-filter: blur(64px) saturate(1.5) brightness(1.08);
  -webkit-backdrop-filter: blur(64px) saturate(1.5) brightness(1.08);
  border: 1px solid var(--border-glass);
  border-radius: var(--card-radius);
  box-shadow:
    0 1px 2px rgba(0,0,0,0.3),
    0 8px 24px rgba(0,0,0,0.2),
    0 32px 64px rgba(0,0,0,0.15),
    inset 0 0.5px 0 rgba(255,255,255,0.1);
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.liquid-glass-elevated::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(180deg, rgba(255,255,255,0.16) 0%, rgba(255,255,255,0.03) 15%, transparent 50%);
  pointer-events: none;
  z-index: 1;
}

.liquid-glass-elevated:hover {
  box-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    0 12px 36px rgba(0,0,0,0.25),
    0 48px 80px rgba(0,0,0,0.18),
    inset 0 0.5px 0 rgba(255,255,255,0.14);
  transform: translateY(-1px);
}

/* Shimmer sweep on hover */
@keyframes glass-shimmer-sweep {
  0% { transform: translateX(-100%) skewX(-15deg); }
  100% { transform: translateX(200%) skewX(-15deg); }
}

.glass-shimmer {
  position: relative;
  overflow: hidden;
}

.glass-shimmer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 40%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.04),
    rgba(255,255,255,0.08),
    rgba(255,255,255,0.04),
    transparent
  );
  transform: translateX(-100%) skewX(-15deg);
  pointer-events: none;
  z-index: 2;
  transition: none;
}

.glass-shimmer:hover::before {
  animation: glass-shimmer-sweep 800ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

[data-theme="solaris"] .glass-shimmer::before {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,240,200,0.03),
    rgba(255,240,200,0.06),
    rgba(255,240,200,0.03),
    transparent
  );
}

/* ============================================
   MOBILE
   ============================================ */
@media (max-width: 767px) {
  /* Hide scrollbars on horizontal scroll areas */
  div::-webkit-scrollbar { display: none; }

  /* Viewport height fix for iOS */
  html, body, #root {
    height: 100dvh;
  }

  /* Prevent overscroll bounce */
  body {
    overscroll-behavior: none;
  }
}

/* Skeleton shimmer animation */
@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ── Mobile layout (< 768px) ─────────────────────────────────────── */
@media (max-width: 768px) {
  /* Hide sidebars — main content fills width */
  [data-sidebar="left"],
  [data-sidebar="right"] {
    display: none !important;
  }

  /* Main content fills available space */
  main {
    width: 100% !important;
    flex: 1 !important;
  }

  /* KPI strip: horizontal scroll */
  [data-kpi-strip] {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    flex-wrap: nowrap !important;
    padding-bottom: 4px;
  }
  [data-kpi-strip] > * {
    min-width: 110px;
    flex-shrink: 0;
    scroll-snap-align: start;
  }

  /* Bottom bar: fixed to bottom */
  [data-bottom-bar] {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 100;
  }

  /* Add padding to main so content isn't hidden behind fixed bottom bar */
  main > div {
    padding-bottom: 60px !important;
  }

  /* Two-column layouts → stack on mobile */
  [data-two-col] {
    flex-direction: column !important;
  }

  /* Depth cards: reduce padding on mobile */
  .depth-card {
    padding: 10px 12px !important;
  }

  /* Agent fleet rows: tighter */
  [data-agent-row] {
    padding: 4px 6px !important;
  }
}

/* Trading news card scrollbar */
.trading-news-card::-webkit-scrollbar { width: 4px; }
.trading-news-card::-webkit-scrollbar-track { background: transparent; }
.trading-news-card::-webkit-scrollbar-thumb { background: var(--border-card); border-radius: 2px; }
.trading-news-card { scrollbar-width: thin; scrollbar-color: var(--border-card) transparent; }
